{% extends "base.html" %}
{% block title %}Architektur bearbeiten{% endblock %}

{% block content %}

<h1 class="title">Architektur bearbeiten</h1>
<p>
    Hier kann eine CNN-Architektur angepasst werden.
</p>

<div class="my-4">
    <form method="post" action="{{ url_for('arch.save', arch_name=arch_name) }}">
        <div class="field">
            <div class="field">
                <label class="label" for="learning-rate">Lernrate:</label>
                <div class="control">
                    <input id="learning-rate" name="learning-rate" class="input" type="number" step="0.00001" min="0"
                        placeholder="z.B. 0.001" required value="{{ training_lr }}">
                </div>
            </div>
            <div class="field">
                <label class="label" for="epochs">Epochen:</label>
                <div class="control">
                    <input id="epochs" name="epochs" class="input" type="number" min="1" placeholder="z.B. 10" required
                        value="{{ training_epochs }}">
                </div>
            </div>
            <div class="field">
                <label class="label" for="batch-size">Batch-Größe:</label>
                <div class="control">
                    <input id="batch-size" name="batch-size" class="input" type="number" min="1" placeholder="z.B. 32"
                        required value="{{ training_batch_size }}">
                </div>
            </div>
            <label class="label" for="arch-json">JSON:</label>
            <div class="control">
                <textarea id="arch-json" name="arch-json" class="textarea is-family-monospace" rows="16"
                    placeholder="JSON-Daten hier einfügen...">{{layers}}</textarea>
            </div>
        </div>
        <div class="field">
            <div class="columns">
                <div class="column is-narrow">
                    <div class="control">
                        <button type="submit" class="button is-link">Speichern</button>
                    </div>
                </div>
                <div class="column">
                    <div class="dropdown is-hoverable">
                        <div class="dropdown-trigger">
                            <button class="button" aria-haspopup="true" aria-controls="dropdown-menu4">
                                <span>&#x2795; Layer hinzufügen</span>
                            </button>
                        </div>
                        <div class="dropdown-menu" id="dropdown-menu4" role="menu">
                            <div class="dropdown-content p-0">
                                <div class="columns">
                                    {% for layer in [
                                    "Conv2D",
                                    "Dense",
                                    "Dropout",
                                    "BatchNormalization",
                                    "AvgPooling2D",
                                    "Flatten",
                                    "ReLU"
                                    ] %}
                                    <div class="column">
                                        <a class="dropdown-item py-4 px-5" onclick="addLayer('{{ layer }}')">
                                            <span class="is-unselectable">{{layer}}</span>
                                        </a>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>

{% endblock %}